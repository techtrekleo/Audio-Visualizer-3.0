<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»‘è† å”±ç‰‡é€æ˜åº¦èª¿è©¦å·¥å…·</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4);
            font-family: Arial, sans-serif;
        }
        .debug-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .debug-section {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        canvas {
            border: 2px solid #333;
            margin: 10px 0;
        }
        .info {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ğŸ” é»‘è† å”±ç‰‡é€æ˜åº¦èª¿è©¦å·¥å…·</h1>
    
    <div class="debug-container">
        <div class="debug-section">
            <h3>æ¸¬è©¦1: åŸºæœ¬é€æ˜åº¦</h3>
            <canvas id="canvas1" width="300" height="300"></canvas>
            <div class="info">æ¸¬è©¦åŸºæœ¬çš„ globalAlpha é€æ˜åº¦æ•ˆæœ</div>
            <button onclick="testBasicTransparency()">æ¸¬è©¦</button>
        </div>

        <div class="debug-section">
            <h3>æ¸¬è©¦2: åœ“å½¢é€æ˜åº¦</h3>
            <canvas id="canvas2" width="300" height="300"></canvas>
            <div class="info">æ¸¬è©¦åœ“å½¢çš„é€æ˜åº¦æ•ˆæœ</div>
            <button onclick="testCircleTransparency()">æ¸¬è©¦</button>
        </div>

        <div class="debug-section">
            <h3>æ¸¬è©¦3: é»‘è† å”±ç‰‡çµæ§‹</h3>
            <canvas id="canvas3" width="300" height="300"></canvas>
            <div class="info">æ¨¡æ“¬é»‘è† å”±ç‰‡çš„å®Œæ•´çµæ§‹</div>
            <button onclick="testVinylStructure()">æ¸¬è©¦</button>
        </div>

        <div class="debug-section">
            <h3>æ¸¬è©¦4: ç§»é™¤æ‰€æœ‰é®ç½©</h3>
            <canvas id="canvas4" width="300" height="300"></canvas>
            <div class="info">ç§»é™¤æ‰€æœ‰ clip å’Œ fill('evenodd')</div>
            <button onclick="testNoMask()">æ¸¬è©¦</button>
        </div>
    </div>

    <div class="debug-section">
        <h3>ğŸ¯ èª¿è©¦çµæœ</h3>
        <div id="debug-output" class="info"></div>
    </div>

    <script>
        function log(message) {
            const output = document.getElementById('debug-output');
            output.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '<br>';
            console.log(message);
        }

        function testBasicTransparency() {
            const canvas = document.getElementById('canvas1');
            const ctx = canvas.getContext('2d');
            
            // æ¸…é™¤ç•«å¸ƒ
            ctx.clearRect(0, 0, 300, 300);
            
            // ç¹ªè£½èƒŒæ™¯
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(0, 0, 300, 300);
            
            // ç¹ªè£½åŠé€æ˜åœ“å½¢
            ctx.save();
            ctx.globalAlpha = 0.7;
            ctx.fillStyle = '#000000';
            ctx.beginPath();
            ctx.arc(150, 150, 100, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            log('âœ… åŸºæœ¬é€æ˜åº¦æ¸¬è©¦å®Œæˆ');
        }

        function testCircleTransparency() {
            const canvas = document.getElementById('canvas2');
            const ctx = canvas.getContext('2d');
            
            // æ¸…é™¤ç•«å¸ƒ
            ctx.clearRect(0, 0, 300, 300);
            
            // ç¹ªè£½å½©è‰²èƒŒæ™¯
            const gradient = ctx.createRadialGradient(150, 150, 0, 150, 150, 150);
            gradient.addColorStop(0, '#ff6b6b');
            gradient.addColorStop(0.5, '#4ecdc4');
            gradient.addColorStop(1, '#45b7d1');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 300, 300);
            
            // ç¹ªè£½åŠé€æ˜é»‘è† å”±ç‰‡
            ctx.save();
            ctx.globalAlpha = 0.7;
            ctx.fillStyle = '#1c1f24';
            ctx.beginPath();
            ctx.arc(150, 150, 120, 0, Math.PI * 2);
            ctx.arc(150, 150, 60, 0, Math.PI * 2, true);
            ctx.fill('evenodd');
            ctx.restore();
            
            log('âœ… åœ“å½¢é€æ˜åº¦æ¸¬è©¦å®Œæˆ');
        }

        function testVinylStructure() {
            const canvas = document.getElementById('canvas3');
            const ctx = canvas.getContext('2d');
            
            // æ¸…é™¤ç•«å¸ƒ
            ctx.clearRect(0, 0, 300, 300);
            
            // ç¹ªè£½èƒŒæ™¯
            const gradient = ctx.createRadialGradient(150, 150, 0, 150, 150, 150);
            gradient.addColorStop(0, '#ff6b6b');
            gradient.addColorStop(0.5, '#4ecdc4');
            gradient.addColorStop(1, '#45b7d1');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 300, 300);
            
            // æ¨¡æ“¬é»‘è† å”±ç‰‡çš„å®Œæ•´çµæ§‹
            const centerX = 150;
            const centerY = 150;
            const discRadius = 120;
            const ringRadius = 80;
            
            // 1. å”±ç‰‡ç´‹è·¯
            ctx.save();
            ctx.globalAlpha = 0.7;
            for (let i = 0; i <= 20; i++) {
                const r = ringRadius + i * ((discRadius - ringRadius) / 20);
                ctx.lineWidth = 1;
                ctx.strokeStyle = i % 2 === 0 ? '#2a2f36' : '#1f2329';
                ctx.beginPath();
                ctx.arc(centerX, centerY, r, 0, Math.PI * 2);
                ctx.stroke();
            }
            ctx.restore();
            
            // 2. æ–œå‘é«˜å…‰å¸¶
            ctx.save();
            ctx.globalAlpha = 0.7;
            const gloss = ctx.createLinearGradient(centerX - discRadius, centerY - discRadius, centerX + discRadius, centerY + discRadius);
            gloss.addColorStop(0, 'rgba(255,255,255,0)');
            gloss.addColorStop(0.5, 'rgba(255,255,255,0.06)');
            gloss.addColorStop(1, 'rgba(255,255,255,0)');
            ctx.fillStyle = gloss;
            ctx.beginPath();
            ctx.arc(centerX, centerY, discRadius, 0, Math.PI * 2);
            ctx.fill();
            ctx.restore();
            
            // 3. ä¸­å¿ƒåœ–ç‰‡ï¼ˆä¸é€æ˜ï¼‰
            ctx.fillStyle = '#1f2937';
            ctx.beginPath();
            ctx.arc(centerX, centerY, ringRadius * 0.9, 0, Math.PI * 2);
            ctx.fill();
            
            // 4. ä¸­å¿ƒå­”
            ctx.fillStyle = '#e5e7eb';
            ctx.beginPath();
            ctx.arc(centerX, centerY, ringRadius * 0.1, 0, Math.PI * 2);
            ctx.fill();
            
            log('âœ… é»‘è† å”±ç‰‡çµæ§‹æ¸¬è©¦å®Œæˆ');
        }

        function testNoMask() {
            const canvas = document.getElementById('canvas4');
            const ctx = canvas.getContext('2d');
            
            // æ¸…é™¤ç•«å¸ƒ
            ctx.clearRect(0, 0, 300, 300);
            
            // ç¹ªè£½èƒŒæ™¯
            const gradient = ctx.createRadialGradient(150, 150, 0, 150, 150, 150);
            gradient.addColorStop(0, '#ff6b6b');
            gradient.addColorStop(0.5, '#4ecdc4');
            gradient.addColorStop(1, '#45b7d1');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, 300, 300);
            
            const centerX = 150;
            const centerY = 150;
            const discRadius = 120;
            const ringRadius = 80;
            
            // åªç¹ªè£½ç´‹è·¯ï¼Œä¸ä½¿ç”¨ä»»ä½•é®ç½©
            ctx.save();
            ctx.globalAlpha = 0.7;
            for (let i = 0; i <= 20; i++) {
                const r = ringRadius + i * ((discRadius - ringRadius) / 20);
                ctx.lineWidth = 1;
                ctx.strokeStyle = i % 2 === 0 ? '#2a2f36' : '#1f2329';
                ctx.beginPath();
                ctx.arc(centerX, centerY, r, 0, Math.PI * 2);
                ctx.stroke();
            }
            ctx.restore();
            
            // ä¸­å¿ƒåœ–ç‰‡ï¼ˆä¸é€æ˜ï¼‰
            ctx.fillStyle = '#1f2937';
            ctx.beginPath();
            ctx.arc(centerX, centerY, ringRadius * 0.9, 0, Math.PI * 2);
            ctx.fill();
            
            // ä¸­å¿ƒå­”
            ctx.fillStyle = '#e5e7eb';
            ctx.beginPath();
            ctx.arc(centerX, centerY, ringRadius * 0.1, 0, Math.PI * 2);
            ctx.fill();
            
            log('âœ… ç„¡é®ç½©æ¸¬è©¦å®Œæˆ - æ‡‰è©²èƒ½çœ‹åˆ°èƒŒæ™¯é€éç´‹è·¯é¡¯ç¤º');
        }

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•é‹è¡Œæ‰€æœ‰æ¸¬è©¦
        window.onload = function() {
            log('ğŸš€ èª¿è©¦å·¥å…·å·²è¼‰å…¥');
            testBasicTransparency();
            testCircleTransparency();
            testVinylStructure();
            testNoMask();
            log('ğŸ¯ æ‰€æœ‰æ¸¬è©¦å®Œæˆï¼è«‹æª¢æŸ¥æ¯å€‹ç•«å¸ƒçš„é€æ˜åº¦æ•ˆæœ');
        };
    </script>
</body>
</html>
