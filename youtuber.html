<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰µä½œè€…å±•ç¤º - Sonic Pulse</title>
    <meta name="description" content="ç™¼ç¾å„ªç§€çš„éŸ³æ¨‚å‰µä½œè€…å’Œä»–å€‘çš„é »é“">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7718548739614199"
     crossorigin="anonymous"></script>
    
    <style>
        /* ===== styles (kept as original) ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #F5F5F0 0%, #E8E8E3 50%, #F0E8E0 100%); min-height: 100vh; color: #4A4A4A; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; margin-bottom: 40px; color: #4A4A4A; }
        .header h1 { font-size: 3rem; font-weight: 700; margin-bottom: 10px; color: #4A4A4A; }
        .header p { font-size: 1.2rem; color: #5C5C5C; }
        .creators-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-bottom: 40px; }
        .creator-card { background: rgba(255, 255, 255, 0.8); border-radius: 20px; padding: 30px; box-shadow: 0 10px 30px rgba(139, 157, 195, 0.2); transition: transform 0.3s ease, box-shadow 0.3s ease; backdrop-filter: blur(10px); border: 1px solid rgba(74, 74, 74, 0.2); }
        .creator-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(139, 157, 195, 0.3); }
        .creator-header { display: flex; align-items: center; margin-bottom: 20px; }
        .creator-info h3 { font-size: 1.5rem; font-weight: 600; color: #4A4A4A; margin-bottom: 5px; }
        .creator-info p { font-size: 1.1rem; color: #5C5C5C; font-weight: 500; }
        .creator-date { font-size: 0.9rem; color: #5C5C5C; margin-bottom: 20px; padding: 10px; background: rgba(139, 157, 195, 0.15); border-radius: 10px; border-left: 4px solid #8B9DC3; }
        .creator-button { display: inline-block; background: linear-gradient(45deg, #8B9DC3, #A8B5C4); color: #FFFFFF; padding: 12px 24px; border-radius: 25px; text-decoration: none; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(139, 157, 195, 0.3); }
        .creator-button:hover { background: linear-gradient(45deg, #9BADCD, #B8C5D4); transform: translateY(-2px); box-shadow: 0 10px 20px rgba(139, 157, 195, 0.4); }
        .creator-button i { margin-right: 8px; }
        .search-container { margin-bottom: 30px; text-align: center; }
        .search-input { width: 100%; max-width: 500px; padding: 15px 20px; border: 1px solid rgba(74, 74, 74, 0.2); border-radius: 25px; font-size: 1.1rem; background: rgba(255, 255, 255, 0.9); box-shadow: 0 4px 15px rgba(139, 157, 195, 0.1); transition: all 0.3s ease; color: #4A4A4A; }
        .search-input:focus { outline: none; background: rgba(255, 255, 255, 1); box-shadow: 0 8px 25px rgba(139, 157, 195, 0.2); border-color: #8B9DC3; }
        .no-results { text-align: center; color: #4A4A4A; font-size: 1.2rem; margin-top: 40px; }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .creators-grid { grid-template-columns: 1fr; gap: 20px; }
            .creator-card { padding: 20px; }
        }

        /* modal styles */
        .description-modal, .add-channel-modal, .delete-channel-modal, .password-modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(74, 74, 74, 0.7); backdrop-filter: blur(5px); }
        .description-modal-content, .add-channel-modal-content, .delete-channel-modal-content, .password-modal-content { background: linear-gradient(135deg, #F5F5F0 0%, #E8E8E3 100%); margin: 5% auto; padding: 0; border-radius: 20px; width: 90%; max-width: 600px; max-height: 80vh; box-shadow: 0 20px 60px rgba(139, 157, 195, 0.3); animation: modalSlideIn 0.3s ease; overflow: hidden; display: flex; flex-direction: column; border: 1px solid rgba(74, 74, 74, 0.2); }
        @keyframes modalSlideIn { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
        .description-header, .modal-header { padding: 1.5rem 2rem; border-bottom: 1px solid rgba(74, 74, 74, 0.2); display: flex; justify-content: space-between; align-items: center; background: rgba(255, 255, 255, 0.5); }
        .description-header h3, .modal-header h3 { margin: 0; color: #4A4A4A; font-family: 'Poppins', sans-serif; font-size: 1.3rem; font-weight: 600; }
        .description-header .close, .modal-header .close { color: #6B7280; font-size: 2rem; font-weight: bold; cursor: pointer; transition: color 0.3s ease; }
        .description-header .close:hover, .modal-header .close:hover { color: #8B9DC3; }
        .description-body, .modal-body { padding: 2rem; overflow-y: auto; flex: 1; max-height: calc(80vh - 120px); }
        .tab-button { background: rgba(255, 255, 255, 0.6); color: #5C5C5C; border: 1px solid rgba(74, 74, 74, 0.2); padding: 0.5rem 1rem; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; font-weight: 500; }
        .tab-button.active { background: rgba(139, 157, 195, 0.3); color: #4A4A4A; border-color: rgba(139, 157, 195, 0.4); }
        .description-text { color: #4A4A4A; line-height: 1.8; font-size: 1rem; background: rgba(255, 255, 255, 0.6); padding: 1.5rem; border-radius: 15px; border: 1px solid rgba(74, 74, 74, 0.2); }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; color: #4A4A4A; font-weight: 500; }
        .form-group input { width: 100%; padding: 12px 15px; border: 1px solid rgba(74, 74, 74, 0.2); border-radius: 10px; font-size: 1rem; background: rgba(255, 255, 255, 0.9); color: #4A4A4A; transition: all 0.3s ease; }
        .form-actions { display: flex; gap: 1rem; justify-content: flex-end; margin-top: 1.5rem; }
        .btn-submit { background: linear-gradient(45deg, #8B9DC3, #A8B5C4); color: #FFFFFF; padding: 12px 24px; border: none; border-radius: 25px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(139, 157, 195, 0.3); }
        .btn-cancel { background: rgba(255, 255, 255, 0.8); color: #4A4A4A; padding: 12px 24px; border: 1px solid rgba(74, 74, 74, 0.3); border-radius: 25px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }

        /* small helpers */
        .channel-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; margin-bottom: 10px; background: rgba(255, 255, 255, 0.6); border-radius: 10px; border: 1px solid rgba(74, 74, 74, 0.2); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-music"></i> å‰µä½œè€…å±•ç¤º</h1>
            <p>ç™¼ç¾å„ªç§€çš„éŸ³æ¨‚å‰µä½œè€…å’Œä»–å€‘çš„é »é“</p>
        </div>
        
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="æœå°‹å‰µä½œè€…...">
        </div>
        
        <!-- æ–°å¢é »é“æŒ‰éˆ• -->
        <div style="text-align: center; margin-bottom: 30px;">
            <button onclick="showAddChannelModal()" class="creator-button" style="font-size: 1.1rem; padding: 15px 30px;">
                <i class="fas fa-plus-circle"></i> æ–°å¢æˆ‘çš„é »é“
            </button>
        </div>
        
        <div class="creators-grid" id="creatorsGrid">
            <!-- å‰µä½œè€…å¡ç‰‡å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>
        
        <div class="no-results" id="noResults" style="display: none;">
            <i class="fas fa-search"></i> æ‰¾ä¸åˆ°ç›¸é—œå‰µä½œè€…
        </div>
    </div>

    <!-- ===== Modals (added to ensure functions can find them) ===== -->
    <div id="descriptionModal" class="description-modal" aria-hidden="true">
        <div class="description-modal-content" id="descriptionContent" role="dialog" aria-modal="true"></div>
    </div>

    <div id="addChannelModal" class="add-channel-modal" aria-hidden="true">
        <div class="add-channel-modal-content">
            <div class="modal-header">
                <h3>æ–°å¢æˆ‘çš„é »é“</h3>
                <span class="close" onclick="closeAddChannelModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="addChannelForm" onsubmit="submitAddChannel(event)">
                    <div class="form-group">
                        <label for="newDcName">å‰µä½œè€…åç¨± (é¡¯ç¤ºåç¨±)</label>
                        <input id="newDcName" required />
                    </div>
                    <div class="form-group">
                        <label for="newChannelName">é »é“åç¨±</label>
                        <input id="newChannelName" required />
                    </div>
                    <div class="form-group">
                        <label for="newYoutubeUrl">YouTube é »é“é€£çµ</label>
                        <input id="newYoutubeUrl" required />
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="closeAddChannelModal()">å–æ¶ˆ</button>
                        <button type="submit" class="btn-submit">æ–°å¢é »é“</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="deleteChannelModal" class="delete-channel-modal" aria-hidden="true">
        <div class="delete-channel-modal-content">
            <div class="modal-header">
                <h3>ç¢ºèªåˆªé™¤</h3>
                <span class="close" onclick="closeDeleteChannelModal()">&times;</span>
            </div>
            <div class="modal-body" id="deleteModalBody">
                <p id="deleteConfirmText">ç¢ºèªè¦åˆªé™¤å—ï¼Ÿ</p>
                <div class="form-actions">
                    <button class="btn-cancel" onclick="closeDeleteChannelModal()">å–æ¶ˆ</button>
                    <button class="btn-delete" onclick="confirmDelete()">ç¢ºå®šåˆªé™¤</button>
                </div>
            </div>
        </div>
    </div>

    <div id="passwordModal" class="password-modal" aria-hidden="true">
        <div class="password-modal-content">
            <div class="modal-header">
                <h3>è«‹è¼¸å…¥å¯†ç¢¼ä»¥ç¹¼çºŒ</h3>
                <span class="close" onclick="closePasswordModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="passwordInput">å¯†ç¢¼</label>
                    <input id="passwordInput" type="password" />
                </div>
                <div class="form-actions">
                    <button class="btn-cancel" onclick="closePasswordModal()">å–æ¶ˆ</button>
                    <button class="btn-submit" onclick="submitPasswordAction()">ç¢ºèª</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== Utilities for local storage =====
        function loadUserChannels() {
            const saved = localStorage.getItem('userChannels');
            return saved ? JSON.parse(saved) : [];
        }
        function saveUserChannels(channels) {
            localStorage.setItem('userChannels', JSON.stringify(channels));
        }

        // ===== Minimal password protection (no plaintext in source) =====
        // uses a simple charCode sum as before but stores target as a number constant
        const TARGET_HASH = 435; // precomputed sum of char codes for the chosen password (keeps plaintext out of source)
        function verifyPassword(input) {
            if (!input || typeof input !== 'string') return false;
            const hash = input.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0);
            return hash === TARGET_HASH && input.length === 8;
        }

        // ===== creators data (original entries preserved + new additions) =====
        let creators = [
            {
                id: '0',
                dcName: 'å£è¢‹è£¡çš„è²“',
                channelName: 'ä¹é»æœˆ',
                youtubeUrl: 'https://www.youtube.com/@NineLiMoon',
                joinDate: '2025/10/15 ä¸Šåˆ 09:00:00'
            },
            {
                id: '1',
                dcName: 'å¯å¤œ',
                channelName: 'COYAå¯å¤œ',
                youtubeUrl: 'https://www.youtube.com/@Coya%E5%8F%AF%E5%A4%9C',
                joinDate: '2025/10/15 ä¸‹åˆ 10:07:02'
            },
            {
                id: '2',
                dcName: 'Xiaoloulou01',
                channelName: 'Xiaoloulou',
                youtubeUrl: 'https://www.youtube.com/@Xiaoloulou',
                joinDate: '2025/10/15 ä¸‹åˆ 10:07:17'
            },
            {
                id: '3',
                dcName: 'ã€ï½‰äººã€‘æœ½è‘‰',
                channelName: 'æœ½æœˆMusic',
                youtubeUrl: 'https://www.youtube.com/@XiuYueMusic',
                joinDate: '2025/10/15 ä¸‹åˆ 10:07:26'
            },
            {
                id: '4',
                dcName: 'åŒ¿åçš„æ­çš‡',
                channelName: 'RE:IGN â”€ KPOP',
                youtubeUrl: 'https://www.youtube.com/channel/UCfTRxp7lFW4CkK7s8-BV0eQ',
                joinDate: '2025/10/15 ä¸‹åˆ 10:07:45'
            },
            {
                id: '5',
                dcName: 'é˜¿å‹³',
                channelName: 'EchoXU',
                youtubeUrl: 'https://www.youtube.com/channel/UCJS6sGpEe4mbo2EMhnuT5PQ',
                joinDate: '2025/10/15 ä¸‹åˆ 10:07:45'
            },
            {
                id: '6',
                dcName: 'å·¥å…·äººğŸ”§',
                channelName: 'è¿·å­MAIGO',
                youtubeUrl: 'https://www.youtube.com/channel/UC4fB8_KdPGBk1bI2DeNKb4w',
                joinDate: '2025/10/15 ä¸‹åˆ 10:07:56'
            },
            {
                id: '7',
                dcName: 'Zoe',
                channelName: 'Zoe. G',
                youtubeUrl: 'https://m.youtube.com/@Zoe_G_Studio/videos',
                joinDate: '2025/10/15 ä¸‹åˆ 10:09:26'
            },
            {
                id: '8',
                dcName: 'PeeKang',
                channelName: 'KANG Music',
                youtubeUrl: 'https://www.youtube.com/@KANGMusic999',
                joinDate: '2025/10/15 ä¸‹åˆ 10:09:36'
            },
            {
                id: '9',
                dcName: 'chrisyang',
                channelName: 'EIRYN',
                youtubeUrl: 'https://youtube.com/@eiryn6616?si=sFCeHJt09-VBrEjF',
                joinDate: '2025/10/15 ä¸‹åˆ 10:10:07',
                channelDescription: {
                    english: `Welcome to EIRYN Nice Music!\nHere's a collection of moving melodies and upbeat beats to accompany you through study, work, relaxation, and everyday life.\nFrom pop music and soothing instrumental music to light background music, we hope to bring joy and energy through our music.\nIf you're looking for your own spiritual background music, this is the best place to go.\n\nğŸ‘‰ Don't forget to subscribe and turn on the bell to make music a part of your life.`,
                    korean: `EIRYN Nice Musicì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!\nê³µë¶€, ì—…ë¬´, íœ´ì‹, ê·¸ë¦¬ê³  ì¼ìƒìƒí™œ ì†ì—ì„œ í•¨ê»˜í•  ê°ë™ì ì¸ ë©œë¡œë””ì™€ ê²½ì¾Œí•œ ë¹„íŠ¸ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”.\níŒ ìŒì•…ë¶€í„° ì°¨ë¶„í•œ ê¸°ì•…ê³¡, ê·¸ë¦¬ê³  ê²½ì¾Œí•œ ë°°ê²½ìŒì•…ê¹Œì§€, ì €í¬ëŠ” ìŒì•…ì„ í†µí•´ ê¸°ì¨ê³¼ ì—ë„ˆì§€ë¥¼ ì„ ì‚¬í•˜ê³ ì í•©ë‹ˆë‹¤.\në‚˜ë§Œì˜ ì˜ì ì¸ ë°°ê²½ìŒì•…ì„ ì°¾ê³  ìˆë‹¤ë©´, ë°”ë¡œ ì´ê³³ì´ ì œê²©ì…ë‹ˆë‹¤.\n\nğŸ‘‰ êµ¬ë…í•˜ê³  ì•Œë¦¼ ì„¤ì •ë„ ìŠì§€ ë§ˆì„¸ìš”. ìŒì•…ì„ ì‚¶ì˜ ì¼ë¶€ë¡œ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`
                }
            },
            {
                id: '10',
                dcName: 'å¡',
                channelName: 'Cat\'s Melody',
                youtubeUrl: 'https://youtube.com/@kimexe111?si=NNAJ8qonGxAIkvsK',
                joinDate: '2025/10/15 ä¸‹åˆ 10:10:34'
            },
            {
                id: '11',
                dcName: 'è¿·è·¯çš„å®‡å®™äºº',
                channelName: 'è¿·è·¯çš„å®‡å®™äºº',
                youtubeUrl: 'https://www.youtube.com/@LostAlien9527',
                joinDate: '2025/10/15 ä¸‹åˆ 10:10:40'
            },
            {
                id: '12',
                dcName: 'å®‰é¤’',
                channelName: 'å®‰é¤’',
                youtubeUrl: 'https://www.youtube.com/@%E5%AE%89%E9%A4%92%E6%98%AF%E8%B2%93%E5%85%AC%E4%B8%BB',
                joinDate: '2025/10/15 ä¸‹åˆ 10:20:08'
            },
            {
                id: '13',
                dcName: 'å°è–°',
                channelName: 'è–°ç¾½',
                youtubeUrl: 'https://youtube.com/channel/UC9ywP_J4rd2eh4AR_RJQwSw?si=9bA2FXSDAjA2etQe',
                joinDate: '2025/10/15 ä¸‹åˆ 11:58:29'
            },
            {
                id: '14',
                dcName: 'æ†¨æ†¨ - YTæœå°‹ é­šé¦™',
                channelName: 'é­šé¦™',
                youtubeUrl: 'https://www.youtube.com/@yyhshah',
                joinDate: '2025/10/16 ä¸Šåˆ 12:23:17'
            },
            {
                id: '15',
                dcName: 'vivaå¤ªå',
                channelName: 'LOFIVAVA',
                youtubeUrl: 'https://www.youtube.com/@LOFIVAVA',
                joinDate: '2025/10/16 ä¸Šåˆ 11:47:06'
            },
            {
                id: '16',
                dcName: 'Xermax',
                channelName: 'Share_Yueei',
                youtubeUrl: 'https://youtube.com/@share_yueei?si=fpdfi_VpBQhMD3PI',
                joinDate: '2025/10/16 ä¸‹åˆ 7:00:20'
            },
            {
                id: '17',
                dcName: 'Z - YTæœå°‹ï¼š@MeowWorld-q6m',
                channelName: '@MeowWorld-q6m',
                youtubeUrl: 'http://www.youtube.com/channel/UCChdk6BzXqu3kbImAWokFRg?sub_confirmation=1',
                joinDate: '2025/10/16 ä¸‹åˆ 7:00:29'
            },
            {
                id: '18',
                dcName: 'å…‰å­¸æ»‘é¼ ',
                channelName: 'æ´›é™½',
                youtubeUrl: 'https://youtube.com/@ch-song-g7w?si=qrOiX3x0YxLfDO9i',
                joinDate: '2025/10/16 ä¸‹åˆ 7:09:37'
            },
            {
                id: '19',
                dcName: 'ç­ èŠ™å¾—åˆ© - Daily Delight',
                channelName: 'ç­ èŠ™å¾—åˆ©',
                youtubeUrl: 'https://www.youtube.com/@ç­ èŠ™å¾—åˆ©',
                joinDate: '2025/10/16 ä¸‹åˆ 9:12:44'
            },
            {
                id: '20',
                dcName: 'Issac',
                channelName: 'Futuristic Guardian Kobe',
                youtubeUrl: 'https://www.youtube.com/channel/UCRKR0_AprQO05ll3p-IAVPg',
                joinDate: '2025/11/17 ä¸Šåˆ 10:34:55',
                additionalChannels: [
                    {
                        channelName: 'Futuristic Guardian Roger',
                        youtubeUrl: 'https://www.youtube.com/@futuristicguardianroger'
                    }
                ]
            },
            {
                id: '21',
                dcName: 'laicc',
                channelName: 'Breathe and Be',
                youtubeUrl: 'https://www.youtube.com/@BreatheAndBe-Mus1c',
                joinDate: '2025/10/18 ä¸Šåˆ 9:01:09'
            },
            {
                id: '24',
                dcName: 'äººç”Ÿçš„æ„ç¾©',
                channelName: 'éŸ³å¤¢å·¥å» ',
                youtubeUrl: 'https://www.youtube.com/@DTF-666',
                joinDate: '2025/10/21 ä¸‹åˆ 11:00:00'
            },
            {
                id: '25',
                dcName: 'æ™‚é›¨',
                channelName: 'å¿ƒå’Œä¹‹è²',
                youtubeUrl: 'https://www.youtube.com/@kokorowanoODO',
                joinDate: '2025/10/21 ä¸‹åˆ 10:49:59'
            },
            {
                id: '26',
                dcName: 'skyehsu71266',
                channelName: '@Skye_Hsu',
                youtubeUrl: 'https://youtube.com/@skye_hsu?si=Q_b8inUHIQkHMF47',
                joinDate: '2025/10/29 ä¸‹åˆ 7:30:52'
            },
            {
                id: '27',
                dcName: 'å¦®å¦®',
                channelName: 'æ—‹å¾‹è£¡çš„ä½ ',
                youtubeUrl: 'https://www.youtube.com/@%E6%97%8B%E5%BE%8B%E8%A3%A1%E7%9A%84%E4%BD%A0',
                joinDate: '2025/11/2 ä¸‹åˆ 3:02:37'
            },
            {
                id: '28',
                dcName: 'yuhnmomo',
                channelName: 'æ³•å¼è‰è“å¸ƒä¸',
                youtubeUrl: 'https://youtube.com/channel/UCLdLKasdxG3qEKxmJZdTQLQ?si=KdK9mr-04UrGgxla',
                joinDate: '2025/11/6 ä¸‹åˆ 7:20:08'
            },
            {
                id: '29',
                dcName: 'panny',
                channelName: 'å¹»éŸ³æµå…‰',
                youtubeUrl: 'https://www.youtube.com/channel/UCQOPNojFmmirTrJj7Uy_YpA',
                joinDate: '2025/11/9 ä¸‹åˆ 9:26:40'
            },
            {
                id: '30',
                dcName: 'Medea',
                channelName: 'å¡ä»»å¯¦é©—å®¤Siren Lab',
                youtubeUrl: 'https://www.youtube.com/@SirenLab',
                joinDate: '2025/11/10 ä¸‹åˆ 10:54:35'
            },
            // New entries provided by user (2025/12/4 - 2025/12/7)
            {
                id: '31',
                dcName: 'â­ï¸Staré¾ğŸ²AIå­¸ç¿’éŸ³æ¨‚å‹•ç•«è£½ä½œ',
                channelName: 'ChordataStar',
                youtubeUrl: 'https://www.youtube.com/@ChordataStar',
                joinDate: '2025/12/4 ä¸‹åˆ 4:08:51'
            },
            {
                id: '32',
                dcName: '.brianhsu',
                channelName: 'AuroraRealm',
                youtubeUrl: 'https://www.youtube.com/@AuroraRealm-h2c/videos',
                joinDate: '2025/12/4 ä¸‹åˆ 11:45:24'
            },
            {
                id: '33',
                dcName: 'dora',
                channelName: 'CreatewithDora',
                youtubeUrl: 'https://youtube.com/@createwithdora?si=WjDri-6m__JuoCfD',
                joinDate: '2025/12/4 ä¸‹åˆ 11:50:06'
            },
            {
                id: '34',
                dcName: 'é‡‘å…‰é–ƒé–ƒ é‹æ°£æ»¿æ»¿',
                channelName: 'hsinyu art',
                youtubeUrl: 'https://www.youtube.com/@hsinyu_art',
                joinDate: '2025/12/5 ä¸Šåˆ 1:41:31'
            },
            {
                id: '35',
                dcName: 'SR',
                channelName: 'ViralWildFeet',
                youtubeUrl: 'https://www.youtube.com/channel/UCyNgd022CodnXjtmBKg_AgA',
                joinDate: '2025/12/7 ä¸‹åˆ 3:13:53'
            }
        ];

        // append user channels from localStorage
        const userChannels = loadUserChannels();
        creators = [...creators, ...userChannels];

        // ===== Rendering =====
        function renderCreators(creatorsToRender = creators) {
            const grid = document.getElementById('creatorsGrid');
            const noResults = document.getElementById('noResults');

            if (!grid) return;
            if (creatorsToRender.length === 0) {
                grid.style.display = 'none';
                noResults.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            noResults.style.display = 'none';

            grid.innerHTML = creatorsToRender.map(creator => {
                // build channel buttons
                let allChannels = [];
                if (creator.channelName && creator.youtubeUrl) {
                    allChannels.push({ channelName: creator.channelName, youtubeUrl: creator.youtubeUrl });
                }
                if (creator.additionalChannels && creator.additionalChannels.length > 0) {
                    allChannels = [...allChannels, ...creator.additionalChannels];
                }

                let channelButtons = '';
                allChannels.forEach((channel, index) => {
                    const safeUrl = channel.youtubeUrl.startsWith('http') ? channel.youtubeUrl : ('https://' + channel.youtubeUrl);
                    channelButtons += `
                        <div class="channel-item">
                            <a href="${safeUrl}" target="_blank" rel="noopener noreferrer" class="creator-button" style="flex: 1; text-align: center; margin: 0;">
                                <i class="fab fa-youtube"></i> ${escapeHtml(channel.channelName)}
                            </a>
                            ${creator.isUserAdded ? `
                                <button onclick="showDeleteChannelModal('${creator.id}', ${index})" class="btn-delete">
                                    <i class="fas fa-trash"></i>
                                </button>` : ''}
                        </div>
                    `;
                });

                if (creator.channelDescription) {
                    channelButtons += `
                        <button onclick="showChannelDescription('${creator.id}')" class="creator-button" style="margin-top: 10px; background: linear-gradient(45deg, #8B9DC3, #A8B5C4);">
                            <i class="fas fa-info-circle"></i> æŸ¥çœ‹é »é“èªªæ˜
                        </button>
                    `;
                }

                return `
                    <div class="creator-card">
                        <div class="creator-header">
                            <div class="creator-info">
                                <h3>${escapeHtml(creator.dcName)}</h3>
                                <p>${escapeHtml(creator.channelName || '')}${creator.additionalChannels ? ` + ${creator.additionalChannels.length} å€‹é »é“` : ''}</p>
                            </div>
                        </div>
                        <div class="creator-date">åŠ å…¥æ™‚é–“ï¼š${escapeHtml(creator.joinDate || '')}</div>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            ${channelButtons}
                        </div>
                        ${creator.isUserAdded ? `
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button onclick="showAddChannelToCreatorModal('${creator.id}')" class="creator-button" style="flex: 1; margin: 0;">
                                    <i class="fas fa-plus"></i> æ–°å¢é »é“
                                </button>
                                <button onclick="showPasswordModal('deleteCreator','${creator.id}')" class="btn-delete" style="flex: 1; margin: 0;">
                                    <i class="fas fa-trash"></i> åˆªé™¤å‰µä½œè€…
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        function escapeHtml(unsafe) {
            if (typeof unsafe !== 'string') return unsafe || '';
            return unsafe.replace(/[&<>"'`=\/]/g, function (s) {
                return ({
                    '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;', '/': '&#x2F;', '`': '&#x60;', '=': '&#x3D;'
                })[s];
            });
        }

        // ===== Search =====
        function searchCreators() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredCreators = creators.filter(creator =>
                (creator.dcName && creator.dcName.toLowerCase().includes(searchTerm)) ||
                (creator.channelName && creator.channelName.toLowerCase().includes(searchTerm))
            );
            renderCreators(filteredCreators);
        }

        // ===== Channel description modal =====
        function showChannelDescription(creatorId) {
            const creator = creators.find(c => c.id === creatorId);
            if (!creator || !creator.channelDescription) return;

            const modal = document.getElementById('descriptionModal');
            const modalContent = document.getElementById('descriptionContent');

            // store current creator id on modal dataset so switchLanguage can read it
            modal.dataset.currentCreatorId = creatorId;

            modalContent.innerHTML = `
                <div class="description-header">
                    <h3>${escapeHtml(creator.dcName)} - ${escapeHtml(creator.channelName)}</h3>
                    <span class="close" onclick="closeDescriptionModal()">&times;</span>
                </div>
                <div class="description-body">
                    <div class="language-tabs">
                        <button class="tab-button active" onclick="switchLanguage(event, 'english')">English</button>
                        <button class="tab-button" onclick="switchLanguage(event, 'korean')">í•œêµ­ì–´</button>
                    </div>
                    <div class="description-text" id="descriptionText">
                        ${escapeHtml(creator.channelDescription.english).replace(/\n/g, '<br>')}
                    </div>
                </div>
            `;

            modal.style.display = 'block';
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        }

        function closeDescriptionModal() {
            const modal = document.getElementById('descriptionModal');
            if (!modal) return;
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = 'auto';
            delete modal.dataset.currentCreatorId;
        }

        // switchLanguage now receives event and language; reads creator id from modal dataset
        function switchLanguage(event, language) {
            const modal = document.getElementById('descriptionModal');
            if (!modal) return;
            const creatorId = modal.dataset.currentCreatorId;
            const creator = creators.find(c => c.id === creatorId);
            if (!creator || !creator.channelDescription) return;

            // update button active states
            const tabs = modal.querySelectorAll('.tab-button');
            tabs.forEach(t => t.classList.remove('active'));
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('active');
            } else if (event && event.target) {
                event.target.classList.add('active');
            }

            const descriptionText = modal.querySelector('#descriptionText');
            descriptionText.innerHTML = escapeHtml(creator.channelDescription[language]).replace(/\n/g, '<br>');
        }

        // ===== Add channel modal handling =====
        function showAddChannelModal() {
            document.getElementById('addChannelModal').style.display = 'block';
            document.getElementById('addChannelModal').setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
        }
        function closeAddChannelModal() {
            const modal = document.getElementById('addChannelModal');
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = 'auto';
            const form = document.getElementById('addChannelForm');
            if (form) form.reset();
        }
        function submitAddChannel(e) {
            e.preventDefault();
            const dcName = document.getElementById('newDcName').value.trim();
            const channelName = document.getElementById('newChannelName').value.trim();
            const youtubeUrl = document.getElementById('newYoutubeUrl').value.trim();

            if (!dcName || !channelName || !youtubeUrl) {
                alert('è«‹å¡«å¯«æ‰€æœ‰æ¬„ä½');
                return;
            }

            // basic URL validation
            if (!/youtube\.com|youtu\.be/.test(youtubeUrl)) {
                alert('è«‹è¼¸å…¥æœ‰æ•ˆçš„ YouTube é »é“é€£çµ');
                return;
            }

            const newId = 'user_' + Date.now();
            const joinDate = new Date().toLocaleString('zh-TW', { hour12: true });

            const newCreator = {
                id: newId,
                dcName,
                channelName,
                youtubeUrl,
                joinDate,
                isUserAdded: true
            };

            creators.push(newCreator);
            const stored = loadUserChannels();
            stored.push(newCreator);
            saveUserChannels(stored);

            renderCreators();
            closeAddChannelModal();
        }

        // ===== Add channel to existing creator (simple modal) =====
        function showAddChannelToCreatorModal(creatorId) {
            const name = prompt('è«‹è¼¸å…¥è¦æ–°å¢çš„é »é“åç¨±èˆ‡é€£çµï¼ˆæ ¼å¼ï¼šé »é“åç¨±|é€£çµï¼‰');
            if (!name) return;
            const parts = name.split('|');
            if (parts.length < 2) {
                alert('è«‹ç”¨ã€Œé »é“åç¨±|é€£çµã€æ ¼å¼è¼¸å…¥');
                return;
            }
            const creator = creators.find(c => c.id === creatorId);
            if (!creator) return;
            if (!creator.additionalChannels) creator.additionalChannels = [];
            creator.additionalChannels.push({ channelName: parts[0].trim(), youtubeUrl: parts[1].trim() });
            // if the creator is user-added, persist to localStorage as well
            if (creator.isUserAdded) {
                const stored = loadUserChannels();
                const idx = stored.findIndex(s => s.id === creatorId);
                if (idx !== -1) {
                    stored[idx] = creator;
                    saveUserChannels(stored);
                }
            }
            renderCreators();
        }

        // ===== Delete channel / creator flow =====
        let pendingDelete = { type: null, creatorId: null, channelIndex: null };

        function showDeleteChannelModal(creatorId, channelIndex) {
            pendingDelete = { type: 'channel', creatorId, channelIndex };
            document.getElementById('deleteConfirmText').textContent = 'ç¢ºèªè¦åˆªé™¤è©²å­é »é“å—ï¼Ÿï¼ˆéœ€é©—è­‰å¯†ç¢¼ï¼‰';
            document.getElementById('deleteChannelModal').style.display = 'block';
            document.getElementById('deleteChannelModal').setAttribute('aria-hidden', 'false');
        }

        function closeDeleteChannelModal() {
            document.getElementById('deleteChannelModal').style.display = 'none';
            document.getElementById('deleteChannelModal').setAttribute('aria-hidden', 'true');
            pendingDelete = { type: null, creatorId: null, channelIndex: null };
        }

        function confirmDelete() {
            // require password confirm
            closeDeleteChannelModal();
            showPasswordModal('deletePending', JSON.stringify(pendingDelete));
        }

        function showPasswordModal(action, payload) {
            const modal = document.getElementById('passwordModal');
            modal.style.display = 'block';
            modal.setAttribute('aria-hidden', 'false');
            modal.dataset.action = action || '';
            modal.dataset.payload = payload || '';
            document.getElementById('passwordInput').value = '';
            document.body.style.overflow = 'hidden';
        }

        function closePasswordModal() {
            const modal = document.getElementById('passwordModal');
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            modal.dataset.action = '';
            modal.dataset.payload = '';
            document.body.style.overflow = 'auto';
        }

        function submitPasswordAction() {
            const modal = document.getElementById('passwordModal');
            const pw = document.getElementById('passwordInput').value || '';
            if (!verifyPassword(pw)) {
                alert('å¯†ç¢¼éŒ¯èª¤');
                return;
            }

            const action = modal.dataset.action;
            const payload = modal.dataset.payload;
            closePasswordModal();

            if (action === 'deleteCreator') {
                const creatorId = payload;
                creators = creators.filter(c => c.id !== creatorId);
                // also remove from stored user channels
                let stored = loadUserChannels();
                stored = stored.filter(s => s.id !== creatorId);
                saveUserChannels(stored);
                renderCreators();
            } else if (action === 'deletePending') {
                try {
                    const pd = JSON.parse(payload);
                    if (pd.type === 'channel') {
                        const creator = creators.find(c => c.id === pd.creatorId);
                        if (creator && creator.additionalChannels && creator.additionalChannels.length > pd.channelIndex) {
                            creator.additionalChannels.splice(pd.channelIndex, 1);
                            // persist if user added
                            if (creator.isUserAdded) {
                                const stored = loadUserChannels();
                                const idx = stored.findIndex(s => s.id === creator.id);
                                if (idx !== -1) {
                                    stored[idx] = creator;
                                    saveUserChannels(stored);
                                }
                            }
                            renderCreators();
                        }
                    }
                } catch (err) {
                    console.error('deletePending payload parse error', err);
                }
            }
        }

        // utility: show password modal for deleting a creator (used in render)
        // showPasswordModal('deleteCreator', creatorId)

        // ===== Initialization =====
        document.addEventListener('DOMContentLoaded', function() {
            renderCreators();
            const searchInput = document.getElementById('searchInput');
            if (searchInput) searchInput.addEventListener('input', searchCreators);

            // global click to close modals when clicking backdrop
            window.addEventListener('click', function(event) {
                const descriptionModal = document.getElementById('descriptionModal');
                if (event.target === descriptionModal) closeDescriptionModal();
                const addModal = document.getElementById('addChannelModal');
                if (event.target === addModal) closeAddChannelModal();
                const deleteModal = document.getElementById('deleteChannelModal');
                if (event.target === deleteModal) closeDeleteChannelModal();
                const passwordModal = document.getElementById('passwordModal');
                if (event.target === passwordModal) closePasswordModal();
            });
        });
    </script>
</body>
</html>